<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Reimbursement Home</title>
    <!-- Vendor -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="./view/styles.css">
</head>
<body>
   <div class="header">
    <div class="container">
    <h1>Expense Reimbursement System</h1>
        </div>
    
</div>
<div class="navigation">  
    <div class="container">
    <ul>
    <li><a class="nav-item nav-link active" href="./home">Home</a></li>
    <li><a class="nav-item nav-link" href="./requests">Requests</a></li>
    <li><a class="nav-item nav-link" href="./employees">Employees</a>
    <li><a class="nav-item nav-link" href="./profile">Profile</a></li>
    <li><a class="nav-item nav-link" href="./logout">Logout</a></li>
    </ul>
    </div>
</div>
<div class="container">

   <h3>View all employees</h3>
   <table class="table">
      <thead>
          <tr>
              <th>Employee ID</th>
              <th>Employee Name</th>
              <th>Employee Email</th>
              <th>Employee Role</th>
              <th>Manager Name</th>
          </tr>
      </thead>
      <tbody id="employee-table">               
      </tbody>
  </table>
   </div>
   <script>
   let requestsUrl = './api/employees';
   
    getRequest(requestsUrl, getAllEmployees);

        function getRequest(url, func){
            let xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                if(this.readyState == 4 && this.status == 200){
                    func(this);
                }
            }
            xhr.open('GET', url);
            xhr.send();
        }

        function getAllEmployees(xhr) {
            let allRequests = document.getElementById('employee-table');
            let results = JSON.parse(xhr.response);


            for(result of results.employees) {
                let tableRow = document.createElement('tr');
                let employeeIdCell = document.createElement('td');
                let employeeNameCell = document.createElement('td');
                let employeeEmailCell = document.createElement('td');
                let employeeRoleCell = document.createElement('td');
                let managerNameCell = document.createElement('td');

                employeeIdCell.innerHTML = result.employeeId;
                employeeNameCell.innerHTML = `${result.firstName} ${result.lastName}`;
                employeeEmailCell.innerHTML = result.emailAddress;
                employeeRoleCell.innerHTML = result.roleId;
               managerNameCell.innerHTML = result.managerId;
				
                



                tableRow.appendChild(employeeIdCell);
                tableRow.appendChild(employeeNameCell);
                tableRow.appendChild(employeeEmailCell);
                tableRow.appendChild(employeeRoleCell);
                tableRow.appendChild(managerNameCell);

                allRequests.appendChild(tableRow);
            }
        }
   
   </script>
</body>
</html>